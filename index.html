<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Gatoroid : Analytics using Mongo &amp; Mongoid" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Gatoroid</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/Alayho/gatoroid">Fork Me on GitHub</a>

          <h1 id="project_title">Gatoroid</h1>
          <h2 id="project_tagline">Analytics using Mongo &amp; Mongoid</h2>

          <section id="downloads">
            <a class="zip_download_link" href="https://github.com/Alayho/gatoroid/zipball/master">Download this project as a .zip file</a>
            <a class="tar_download_link" href="https://github.com/Alayho/gatoroid/tarball/master">Download this project as a tar.gz file</a>
          </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
		<h3>Gatoroid</h3>
		<p><a href="http://github.com/alayho/gatoroid">View Project</a></p>
		<p>Gatoroid is a way to store analytics using the powerful features of MongoDB for scalability</p>
		<p>Leveraging mongoid, Gatoroid is a way to increment, decrement, add to, and reset counters in MongoDB.  The data is stored using an hourly grain in a utc allowing for easy analytics for on just about anything.</p>

		<h4>Using Gatoroid to store analytics information</h4>
		<p>Simply create a class that includes Mongoid::Gator</p>
		<pre><code>class SiteStats
  include Mongoid::Gator
  field :siteid
  gator_field :visits
end</code></pre>

		<p>Use the class to increment the counter for visits to the site.</p>
		<pre><code>@site_stats = SiteStats.new()
@site_stats.visits.inc(:siteid=>100)</code></pre>

		<p>You can also add to the count using the add method.  The following adds 10 visits to tomorrow.</p>
		<pre><code>@site_stats.visits.add(10, :date=>Today.now + 1.day)</code></pre>

		<p>The data will be stored in MongoDB using seconds since the epoch in hours</p>
		<pre><code>{
  "_id" : ObjectId("4f85b40f2a2c4e4d9709eaf9"),
  "date" : 1334160000,
  "siteid" : 100,
  "visits" : 1
}</code></pre>

		<p>You can view the total visits to a site by using some built in functions.  For example:</p>
<pre><code>@site_stats = SiteStats.new()
@site_stats.visits.today(:siteid=>100)  # returns total for today
@site_stats.visits.yesterday(:siteid=100) # returns total for yesterday
</code></pre>

<p>To get a list of visits to for a range, use the range method.</p>
<pre><code>@site_stats = SiteStats.new()
@site_stats.visits.range(Time.now..Time.now + 1.day,Mongoid::Gator::Readers::DAY, :siteid=>100)</code></pre>

<p>You can change the grain on which you would like to return the data using</p>
<pre><code>Mongoid::Gator::Readers::HOUR
Mongoid::Gator::Readers::DAY
Mongoid::Gator::Readers::MONTH</code></pre>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Gatoroid maintained by <a href="https://github.com/Alayho">Alayho</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
